"use strict";const charactersList=document.querySelector(".js_characters_list");let characters=[],favoriteCharacters=[];function getAPIinfo(){fetch("https://www.breakingbadapi.com/api/characters",{method:"GET"}).then(e=>e.json()).then(e=>{characters=e,getFromLocalStorage(),paintCharactersCards()})}function renderCard(e){const t=document.createElement("li"),a=document.createElement("article");a.classList.add("js_card"),a.setAttribute("data-id",e.char_id);const r=document.createElement("div");r.setAttribute("style","background-image:url('"+e.img),r.classList.add("characters__img");const c=document.createElement("h2"),n=document.createTextNode(""+e.name);c.appendChild(n);const s=document.createElement("h3"),d=document.createTextNode(""+e.status);return s.appendChild(d),a.appendChild(r),a.appendChild(c),a.appendChild(s),t.appendChild(a),t}function paintCharactersCards(){charactersList.innerHTML="";for(let e=0;e<characters.length;e++)charactersList.appendChild(renderCard(characters[e]));cardListener()}getAPIinfo();const form=document.querySelector(".js_form"),searchInput=document.querySelector(".js_search_input"),searchBtn=document.querySelector(".js_search_btn");let searchedCharacters=[];function handleSearch(e){e.preventDefault();const t=searchInput.value.toLowerCase(),a=characters.filter(e=>e.name.toLowerCase().includes(t));console.log(a),paintCharactersCards(a)}searchBtn.addEventListener("click",handleSearch),form.addEventListener("submit",e=>{e.preventDefault()});const favsSection=document.querySelector(".js_favorites"),favsList=document.querySelector(".js_favorites_list");function paintFavCharacters(){favsList.innerHTML="",favsSection.classList.remove("collapsed");for(const e of favoriteCharacters)favsList.appendChild(renderFavCard(e))}function renderFavCard(e){const t=document.createElement("li"),a=document.createElement("article");a.classList.add("js_card"),a.classList.add("selected"),a.setAttribute("data-id",e.char_id);const r=document.createElement("div");r.setAttribute("style","background-image:url('"+e.img),r.classList.add("characters__img");const c=document.createElement("h2"),n=document.createTextNode(""+e.name);c.appendChild(n);const s=document.createElement("h3"),d=document.createTextNode(""+e.status);return s.appendChild(d),a.appendChild(r),a.appendChild(c),a.appendChild(s),t.appendChild(a),t}function handleSelection(e){const t=parseInt(e.currentTarget.dataset.id),a=characters.find(e=>e.char_id===t);favoriteCharacters.push(a),paintFavCharacters(),setInLocalStorage(favoriteCharacters)}function cardListener(){document.querySelectorAll(".js_card").forEach(e=>{e.addEventListener("click",handleSelection)})}function setInLocalStorage(e){localStorage.setItem("Favorites",JSON.stringify(e))}function getFromLocalStorage(){const e=JSON.parse(localStorage.getItem("Favorites"));null!==e&&(favoriteCharacters=e,paintFavCharacters())}